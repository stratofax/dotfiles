# Shared shell functions for bash and zsh
# Managed via dotfiles repo with stow

# Telegram notification helper
notify() {
  local message="$1"
  if [[ -z "$message" ]]; then
    echo "Usage: notify 'your message here'"
    return 1
  fi

  # Source credentials if not already loaded
  [[ -z "$TELEGRAM_BOT_TOKEN" ]] && source ~/.my_tokens 2>/dev/null

  if [[ -n "$TELEGRAM_BOT_TOKEN" && -n "$TELEGRAM_CHAT_ID" ]]; then
    curl -s -X POST "https://api.telegram.org/bot$TELEGRAM_BOT_TOKEN/sendMessage" \
      -d chat_id=$TELEGRAM_CHAT_ID \
      -d text="$message" > /dev/null && echo "ğŸ“± Notification sent" || echo "âŒ Notification failed"
  else
    echo "âš ï¸  Telegram credentials not found in ~/.my_tokens"
    return 1
  fi
}
